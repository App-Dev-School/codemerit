<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Compose'" [items]="['Email']" [active_item]="'Compose'"></app-breadcrumb>
    </div>
    <div class="row">
      <!-- Loading spinner -->
      @if (loading) {
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="tbl-spinner">
          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
          </mat-progress-spinner>
        </div>
      </div>
      }

      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="card">
          <div class="header">
            <h4>{{screenTitle}}</h4>
          </div>
          <div class="body">
            <div class="row">
              <div class="col-lg-12">
                @if(!submitted){
                <form class="authForm" [formGroup]="authForm" (ngSubmit)="onSubmit()">
                  <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>First Name</mat-label>
                        <input matInput formControlName="firstName" required>
                        @if (authForm.get('firstName')!.hasError('required')) {
                        <mat-error>
                          First name is required AAA
                        </mat-error>
                        }
                      </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Last Name</mat-label>
                        <input matInput formControlName="lastName">
                        @if (authForm.get('lastName')!.hasError('required')) {
                        <mat-error>
                          Last name is required
                        </mat-error>
                        }
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Email</mat-label>
                        <input matInput formControlName="email" required>
                        <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>mail</mat-icon>
                        @if (authForm.get('email')!.hasError('required') || authForm.get('email')!.touched) {
                        <mat-error>
                          Please enter a valid email address
                        </mat-error>
                        }
                      </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Mobile</mat-label>
                        <input matInput formControlName="mobile">
                        <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>phone</mat-icon>
                        @if (authForm.get('mobile')!.hasError('required') || authForm.get('mobile')!.touched) {
                        <mat-error>
                          Please enter a valid mobile number
                        </mat-error>
                        }
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Location / City</mat-label>
                        <input matInput formControlName="city">
                        <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>location_city</mat-icon>
                        @if (authForm.get('city')!.hasError('required')) {
                        <mat-error>
                          Please let us know your city.
                        </mat-error>
                        }
                      </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Country</mat-label>
                        <input matInput formControlName="country" [matAutocomplete]="autoCountry">
                        <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>globe</mat-icon>
                        <mat-autocomplete #autoCountry="matAutocomplete" [displayWith]="displayCountry">
                          @for (country of filteredCountries | async; track country) {
                          <mat-option [value]="country.name">
                            {{country.name}}
                          </mat-option>
                          }
                        </mat-autocomplete>
                        @if (authForm.get('country')!.hasError('required')) {
                        <mat-error>
                          Please let us know your country.
                        </mat-error>
                        }
                      </mat-form-field>
                    </div>
                  </div>

                   @if(true){
                    <hr>
                  <h5 class="m-b-10">Other Details</h5>
                  <div class="row">
                     <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width">
                      <mat-label>Select your current role</mat-label>
                      <input type="text" matInput formControlName="designation" [matAutocomplete]="auto">
                      <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayRole">
                        @for (option of filteredOptions | async; track option) {
                        <mat-option [value]="option.value">
                          {{option.label}}
                        </mat-option>
                        }
                      </mat-autocomplete>
                    </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>LinkedIn URL</mat-label>
                        <input matInput formControlName="linkedinUrl">
                        <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>linkedin</mat-icon>
                      </mat-form-field>
                    </div>
                  </div>
                  }

                  <div class="col-lg-12">
                    <div class="m-l-25 m-t-20 m-b-20">
                      <button mat-flat-button color="accent" class="btn" [disabled]="!authForm.valid "
                        type="submit">
                        {{screenAction}}
                      </button>
                      <button mat-raised-button color="warn" class="m-l-25" (click)="authForm.reset()">Cancel</button>
                    </div>
                  </div>
                </form>
              }@else {
            <mat-card class="example-card" appearance="outlined">
              <mat-card-content>
               <div class="tbl-spinner">
                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                </mat-progress-spinner>
            </div>
            <h5>{{ loadingTxt }}</h5>
              </mat-card-content>
            </mat-card>
              }
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
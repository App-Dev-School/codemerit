@if(isLoading){
<div class="progress-container">
  <div class="preloader pl-size-sm">
    <div class="spinner-layer pl-purple">
      <div class="circle-clipper left">
        <div class="circle"></div>
      </div>
      <div class="circle-clipper right">
        <div class="circle"></div>
      </div>
    </div>
  </div>
</div>
}
@if(!isLoading){
<div class="text-center" [ngClass]="{ 'outerPadding': mode === 'dialog' }">

   <div class="row clearfix">
    @for(job of courses|async;track job){
    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
      <mat-card class="hoverCard">
        <mat-card-content>
          <!-- @if(job.isSubscribed){
        <img src="assets/images/icons/badge.svg" class="job-badge" alt="Medal Pic" />
        } -->
          @if(job.isSubscribed || currentCourses.includes(+job.id)){
          <img src="assets/images/icons/badge.svg" class="job-badge" alt="Learner Badge" />
          }
          <div class="subjectHeader">
            @if(job.isSubscribed){
            <small>Current Role</small>
            }
            <mat-card-title class="text">{{job.title}}</mat-card-title>
          </div>
          <p class="font-12">{{job.description}}</p>
          <hr class="dim-divider">
          <!-- <p class="font-10">{{job.title}}</p> -->
          @if (job && job?.subjects) {
          <ul class="list-unstyled order-list m-b-0">
            @for (item of job?.subjects; track item) {
            <li class="avatar avatar-sm">
              <img class="rounded-circle" [src]="item.image" alt="{{item.title}}">
            </li>
            }
          </ul>
          }

          @if(job.isSubscribed){
          <ul class="list-unstyled">
            @if (job.coverage > 0) {
            <li>
              <div class="mb-2">
                <span class="progress-label text-start">Score</span>
                <span class="float-end progress-percent label m-b-5" [ngClass]="'label-success'">{{job.score}}%</span>
              </div>
              <div class="progress skill-progress m-b-20 w-100">
                <div class="progress-bar" [ngClass]="'progress-bar-success'" [style.width]="job.score + '%'"
                  role="progressbar" [attr.aria-valuenow]="job.score" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </li>
            }
            <li>
              <div class="mb-2">
                <span class="progress-label text-start">Coverage</span>
                <span class="float-end progress-percent label m-b-5"
                  [ngClass]="'label-success'">{{job.coverage}}%</span>
              </div>
              <div class="progress skill-progress m-b-20 w-100">
                <div class="progress-bar" [ngClass]="'progress-bar-success'" [style.width]="job.coverage + '%'"
                  role="progressbar" [attr.aria-valuenow]="job.coverage" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </li>
          </ul>
          }
          @if(minimal){
          <mat-card-footer>
            <hr class="dim-divider">
            <div class="d-flex flex-column flex-sm-row justify-content-center gap-2 w-100">
              @if (currentCourses.length > 0 && currentCourses.includes(job.id)) {
              <button mat-flat-button color="primary" (click)="switchJobRole(job)" rippleEffect class="w-100 w-md-auto">
                View
              </button>
              }@else{
              <button mat-stroked-button color="primary" (click)="pickJobRole(job)" class="w-100 w-md-auto">
                Select
              </button>
              }
            </div>
          </mat-card-footer>
          }
        </mat-card-content>
      </mat-card>
    </div>
    }
  </div>

</div>
}
@if(showContent){
<section class="content" [@fadeIn]>
  @if (loading) {
  <div class="overlay"></div>
  <div class="animToast courseLoader loading">
    <h5>{{loadingText}}</h5>
    <h6 class="col-grey">{{ courseItem?.title ? 'Fetching '+courseItem?.title+' Subjects': 'Fetching Details'}} </h6>
    <hr class="dim-divider">
    <!-- Stacked subject image loading effect -->
    @if (courseItem && courseItem?.subjects) {
    <div class="image-group">
      @for (item of courseItem?.subjects; track item) {
      <img [src]="item.image ?? 'assets/images/tech/placeholder.png'" class="floating" [alt]="item.title">
      }
    </div>
    }
    <hr class="dim-divider">
    <h6 class="col-grey">Please wait</h6>
  </div>
  }
  @if (!loading && courseItem) {
  <div class="content-block">
    <div class="block-header">
    </div>

    <div class="row m-t-20 match-height clearfix">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
        @if (!(userData | async)?.userDesignation?.title) {
        <app-congratulations-card [user]="(userData| async)"></app-congratulations-card>
        }
        @if (!(userData | async)?.userDesignation?.title) {
        <app-medal-card [userName]="'Hi '+(userData| async)?.firstName +'!'"
          [message]="'Up-Skill and Evaluate Skills in '+courseItem?.title+'.'"></app-medal-card>
        }
      </div>
    </div>

    <div class="row m-t-0 match-height clearfix">
      <!-- <div class="col-12">
        <h4 class="text-center font-20 m-b-20"><span class="bold">{{courseItem?.title}} Skill Assessment</span>
        </h4>
      </div> -->
      <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
        <div class="card">
          <div class="m-b-20">
            <div class="contact-grid">
              <div class="profile-header bg-dark">
                <div class="user-name">{{(userData| async)?.firstName}} {{(userData| async)?.lastName}}</div>
                @if ((userData| async)?.userDesignation) {
                <div class="name-center">{{ (userData| async)?.userDesignation?.title }}</div>
                }@else{
                <div class="name-center">New Joiner</div>
                <small class="miniTxt">Let us know your Tech Career Preference</small>
                }
              </div>
              <img src="assets/images/users/user.jpg" class="user-img" alt="{{(userData| async)?.firstName}}">
              <p>
                {{(userData| async)?.country}}
              </p>
            </div>
            <div class="text-center p-t-20">
              <small>Subjects in {{courseItem.title}} roles</small>
              <h4 class="name-center">{{courseItem.title}}</h4>
              @if (courseItem && courseItem?.subjects) {
              <ul class="list-unstyled order-list m-b-0">
                @for (item of courseItem?.subjects; track item) {
                <li class="avatar avatar-sm">
                  <img class="rounded-circle" [src]="item.image" alt="{{item.title}}">
                </li>
                }
              </ul>
              <hr class="dim-divider">
              }

              @if (!((userData| async)?.designation)) {
              <small class="font-12 m-b-10">Aspiring to become a {{courseItem.title}}?</small>
              <!-- <button mat-stroked-button (click)="openCourseLauncher('default')" class="btn" rippleEffect>
                <i class="material-icons">autorenew</i> &nbsp;Select Designation</button> -->
              <button mat-stroked-button (click)="onSubscribe(courseItem)" class="btn" rippleEffect>
                <i class="material-icons">autorenew</i> &nbsp;Select Designation</button>
              }

              <button mat-stroked-button (click)="goToCourses()" color="primary">
                <i class="material-icons">autorenew</i> &nbsp;Explore Roles</button>

              @if ((userData| async)?.designation && courseItem && (userData| async)?.designation !== courseItem?.id) {
              <hr class="col-grey">
              <div class="font-12 m-b-10">Need to switch to {{courseItem.title}} role?</div>
              <button mat-flat-button (click)="onSubscribe(courseItem)" color="primary">
                <i class="material-icons">autorenew</i> Switch Role</button>
              }
            </div>
          </div>
        </div>
        <!-- <hr class="col-grey"> -->
      </div>

      <div class="col-xl-8 col-lg-8 col-md-8 col-sm-12">
        <div class="row text-center clearfix">
          @if (courseData && courseData?.length > 0) {
          @for (item of courseData; track item) {
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
            <app-subject-tracker-card [item]="item" (launchSubjectExplorer)="launchSubjectExplorer($event)"
              (takeQuiz)="openQuizLauncher(item)"></app-subject-tracker-card>
          </div>
          }
          }
        </div>
      </div>
    </div>

  </div>
  }
</section>
}
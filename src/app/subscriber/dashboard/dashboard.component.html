@if(showContent){
<!-- <section class="content" [@slideInOut]> -->
<section class="content" [@fadeIn]>
  @if (loading || generatingQuiz) {
  <div class="overlay"></div>
  <div class="animToast loading">
    <img [src]="currentSubject ? currentSubject?.image : 'assets/images/icons/cube.gif'"
      class="image-pulse loadingIcon m-b-20">
    @if(generatingQuiz){
    <h6>Generating Quiz for {{currentSubject?.title}}</h6>
    }@else{
    <h5>{{loadingText}}</h5>
    }
    <h6>Please wait</h6>
    <!-- <p>display image once available: {{subjectData.image}} | {{subjectData.color}}</p> -->
  </div>
  }

  @if (!loading && !generatingQuiz && currentSubject) {
  <div class="content-block">
    <mat-tab-group mat-align-tabs="start" class="m-t-20">
      <mat-tab label="{{ currentSubject?.title }} Dashboard">
        <ng-container *ngTemplateOutlet="subjectDashboard"></ng-container>
      </mat-tab>
      <mat-tab label="Practice">
        <ng-container *ngTemplateOutlet="subjectTopics"></ng-container>
      </mat-tab>
      <mat-tab label="Achievements">
        <ng-container *ngTemplateOutlet="subjectGoals"></ng-container>
      </mat-tab>
    </mat-tab-group>
    <hr class="dim-divider">
    <div class="row">
      <div class="col-12">
        <div class="text-center p-t-20 p-b-20">
          <button mat-stroked-button color="primary" (click)="goToSubjects()">Explore Other Subjects</button>
        </div>
      </div>
    </div>
  </div>
  }
</section>
}
<ng-template #subjectDashboard>
  <div class="row m-t-10">
    <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7">
      <!-- <p>{{subjectData|json}}</p> -->
      <app-subject-performance-card [subject]="subjectData" (exploreSubject)="exploreSubject($event)"
        (enrollSubject)="enrollSubject($event)"></app-subject-performance-card>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">
      @if(subjectData && subjectData?.syllabus?.length > 0){
      <!-- <p>{{ subjectData?.syllabus | json}}</p> -->
      <app-goal-path [title]="currentSubject.title" [color]="currentSubject.color" [topics]="subjectData?.syllabus"
        (nextGoal)="onTopicQuiz($event)"></app-goal-path>
      }
    </div>
  </div>

  <div class="row m-t-20">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
      <mat-card>
        <mat-card-header class="header-style">
          @if (currentSubject?.image) {
          <img mat-card-avatar [src]="currentSubject?.image" class="m-b-10">
          }
          <mat-card-title>Learning Guidelines</mat-card-title>
        </mat-card-header>
        <mat-card-content class="p-l-5">
          <!-- <img [src]="currentSubject?.image" class="text-center smallLoadingIcon m-b-20">
              <h5 class="cmSubHeading">Master {{currentSubject?.title}}</h5> -->
          <p class="m-t-10 font-12 m-t-0">Boost your knowledge with interactive and concept-driven assessments.</p>
          <hr class="dim-divider">
          <p class="m-b-8 font-12 d-flex">
            <i class="material-icons col-blue psr-2">check_circle</i>
            <span class="step-title">Set Your Goals </span> Begin by exploring the practice materials and defining your
            learning objectives.
          </p>

          <p class="m-b-8 font-12 d-flex">
            <i class="material-icons col-blue psr-2">check_circle</i>
            <span class="step-title">Track Your Progress </span> Use the Subject Progress Tracker to follow structured
            assessments and measure your growth.
          </p>

          <p class="m-b-8 font-12 d-flex">
            <i class="material-icons col-blue psr-2">check_circle</i>
            <span class="step-title">Revise Before You Test </span> Review topics thoroughly to ensure better
            performance in assessments.
          </p>

          <p class="m-b-8 font-12 d-flex">
            <i class="material-icons col-blue psr-2">check_circle</i>
            <span class="step-title">Take Smart Assessments </span> Attempt interactive quizzes with focus; minimize
            wrong answers, as they impact your overall score.
          </p>

          <p class="m-b-8 font-12 d-flex">
            <i class="material-icons col-blue psr-2">check_circle</i>
            <span class="step-title">Climb the Leaderboard </span> Maintain high accuracy and consistent scores to earn
            badges, rewards, and a top leaderboard spot.
          </p>

          <hr class="dim-divider">
        </mat-card-content>
        <mat-card-footer>
          <div class="text-center p-t-20 p-b-20">
            <button mat-stroked-button color="primary" class="waves-effect" (click)="launchSubjectQuiz(currentSubject)">
              <!-- Test {{currentSubject?.title}} Skills -->
              {{nextAction}}
            </button>
          </div>
        </mat-card-footer>
      </mat-card>
    </div>
    @if(subjectData?.popularTopics){
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
      <mat-card>
        <mat-card-header class="header-style">
          @if (currentSubject?.image) {
          <img mat-card-avatar [src]="currentSubject?.image" class="m-b-10">
          }
          <mat-card-title>Popular {{currentSubject?.title}} Topics</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-chip-set aria-label="Tags">
            @for(topic of subjectData.popularTopics;track topic){
            <mat-chip class="matChipSmall">{{topic.title}}
              <span class="badge col-purple">{{topic.votes}}</span>
            </mat-chip>
            }
          </mat-chip-set>
        </mat-card-content>
      </mat-card>
    </div>
    }
  </div>
</ng-template>

<ng-template #subjectTopics>
  @if(subjectData?.syllabus && subjectData?.syllabus.length > 0){
  <div class="text-center">
    <h4 class="text-center m-t-20 m-b-0">
      Get Started with {{ currentSubject?.title }}
    </h4>
    <small class="m-t-0 m-b-10"> {{ subjectData?.syllabus.length }} Milestones to level up your {{
      currentSubject?.title }} skills</small>
  </div>
  <hr class="dim-divider">
  <app-topics-list [subjectTopics]="subjectData?.syllabus" (topicExplore)="onTopicExplore($event)"
    (topicQuiz)="onTopicQuiz($event)"></app-topics-list>
  }@else{
  <mat-card class="card text-center m-t-20 m-b-20" appearance="outlined">
    <mat-card-content class="text-center no-results">
      <mat-card-title><span [ngStyle]="{'background-color':currentSubject.color}"></span>{{ currentSubject?.title }}
        Practice Path</mat-card-title>
      <h6 class="font-15 m-t-0 col-grey">The Curriculum for {{currentSubject?.title}} is not available at this
        moment.</h6>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button class="icon-button">
        <mat-icon>thumb_up</mat-icon> Vote for {{currentSubject?.title}}</button>
    </mat-card-actions>
  </mat-card>
  }
</ng-template>

<ng-template #subjectGoals>
  <div class="row m-t-10 clearfix">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
      <mat-card>
        <mat-card-header class="header-style">
          <mat-card-title>Achievements & Badges</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <ng-scrollbar style="height: 400px" visibility="hover">
            <app-recent-comments [achievements]="achievements"></app-recent-comments>
          </ng-scrollbar>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
      <mat-card>
        <mat-card-header class="header-style">
          <!-- <img mat-card-avatar src="{{topic.image}}"> -->
          <mat-card-title>Whoâ€™s Leading in {{currentSubject?.title}}?</mat-card-title>
          <a mat-button color="primary" (click)="viewMeritList()">
            <i class="material-icons col-green psr-2">trending_up</i>
          </a>
        </mat-card-header>
        <mat-card-content>
          <app-merit-list-widget [meritList]="subjectData?.meritList"></app-merit-list-widget>
        </mat-card-content>
        <mat-card-footer>
          @if (subjectData?.meritList.length > 0) {
          <p class="m-b-0 font-12 d-flex flex-center"><i class="material-icons col-green psr-2">trending_up</i>
            Top Performers in {{currentSubject?.title}}
          </p>
          <hr class="dim-divider">
          }
          <div class="text-center p-t-20 p-b-20">
            <button mat-stroked-button color="primary" (click)="launchSubjectQuiz(currentSubject)">
              Take {{currentSubject?.title}} Quiz
            </button>
          </div>
        </mat-card-footer>
      </mat-card>

      <mat-card>
        <mat-card-content>
          <h4 class="cmSubHeading text-center m-b-0">Schedule Mock Interviews</h4>
          <hr class="dim-divider">
          <p class="m-b-0 font-12 d-flex flex-center">
           Advance through Basic and Intermediate levels to experience AI and Human-led Mock Interviews.
          </p>
          <hr class="dim-divider">
          <div class="text-center p-t-20 p-b-20">
            <button mat-stroked-button color="primary" (click)="onScheduleMockInt()">
              <mat-icon>schedule</mat-icon> Schedule Mock Interview
            </button>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-content class="text-center">
          <img [src]="'assets/images/icons/certificate.png'" class="image-pulse smallLoadingIcon m-b-20">
          <h4 class="cmSubHeading text-center m-b-0">{{currentSubject?.title}} Certification</h4>
          <hr class="dim-divider">
          <p class="m-b-0 font-12 d-flex flex-center">
            Complete your {{currentSubject?.title}} milestones to generate your digital certicate.
          </p>
          <hr class="dim-divider">
          <div class="text-center p-t-20 p-b-20">
            <button mat-stroked-button color="primary" (click)="onCertificateDownload()">
              <mat-icon>cloud_download</mat-icon> Download Certificate
            </button>
          </div>
        </mat-card-content>
      </mat-card>

    </div>
  </div>
</ng-template>